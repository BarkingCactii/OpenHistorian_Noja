{"version":3,"sources":["../src/annotation_ctrl.js"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAO,O;;;;;;;;;;;;;;;;;;;;;8CAEM,4B;AACX,8CAAa,MAAb,EAAqB;AAAA;;AACnB,eAAK,MAAL,GAAc,MAAd;AACA,eAAK,UAAL,CAAgB,KAAhB,GAAyB,KAAK,UAAL,CAAgB,KAAhB,IAAyB,EAAlD;AACA,eAAK,SAAL,GAAiB,EAAjB;AACA,eAAK,SAAL,GAAiB,EAAjB;AACA,eAAK,YAAL;AACD;;;;4CACkB,CAElB;;;4CACkB;AACjB,iBAAK,cAAL;AACD;;;yCACe;AACd,gBAAI,OAAO,IAAX;AACA,iBAAK,UAAL,CAAgB,YAAhB,CAA6B,KAAK,UAAL,CAAgB,QAAhB,CAAyB,KAAtD,EAA6D,IAA7D,CAAkE,eAAO;AACvE,mBAAK,SAAL,GAAiB,GAAjB;AACD,aAFD;AAGD;;;2CACiB;AAChB,gBAAI,OAAO,IAAX;AACA,iBAAK,UAAL,CAAgB,sBAAhB,CAAuC,KAAK,QAAL,CAAc,KAArD,EAA4D,IAA5D,CAAiE,qBAAa;AAC5E,mBAAK,SAAL,GAAiB,SAAjB;AACD,aAFD;AAGD;;;;;;;;AAGH,mCAA6B,WAA7B,GAA2C,kCAA3C","file":"annotation_ctrl.js","sourceRoot":"gridprotectionalliance-osisoftpi-datasource","sourcesContent":["import _ from 'lodash'\r\n\r\nexport class PiWebApiAnnotationsQueryCtrl {\r\n  constructor ($scope) {\r\n    this.$scope = $scope\r\n    this.annotation.query = (this.annotation.query || {})\r\n    this.databases = []\r\n    this.templates = []\r\n    this.getDatabases()\r\n  }\r\n  templateChanged () {\r\n\r\n  }\r\n  databaseChanged () {\r\n    this.getEventFrames()\r\n  }\r\n  getDatabases () {\r\n    var ctrl = this\r\n    ctrl.datasource.getDatabases(this.datasource.afserver.webid).then(dbs => {\r\n      ctrl.databases = dbs\r\n    })\r\n  }\r\n  getEventFrames () {\r\n    var ctrl = this\r\n    ctrl.datasource.getEventFrameTemplates(ctrl.database.WebId).then(templates => {\r\n      ctrl.templates = templates\r\n    })\r\n  }\r\n}\r\n\r\nPiWebApiAnnotationsQueryCtrl.templateUrl = 'partials/annotations.editor.html'\r\n"]}