define(["jquery","lodash","app/plugins/sdk","app/core/utils/kbn","app/core/time_series","angular"],function(e,t,i,r,n,o){return function(e){var t={};function i(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i(i.s=11)}([function(t,i){t.exports=e},function(e,i){e.exports=t},function(e,t){e.exports=i},function(e,t){e.exports=r},function(e,t){e.exports=n},function(e,t){e.exports=o},function(e,t,i){
/*!
 * perfect-scrollbar v1.2.0
 * (c) 2017 Hyunje Jun
 * @license MIT
 */
e.exports=function(){"use strict";function e(e){return getComputedStyle(e)}function t(e,t){for(var i in t){var r=t[i];"number"==typeof r&&(r+="px"),e.style[i]=r}return e}function i(e){var t=document.createElement("div");return t.className=e,t}function r(e,t){if(!f)throw new Error("No element matching method supported");return f.call(e,t)}function n(e){e.remove?e.remove():e.parentNode&&e.parentNode.removeChild(e)}function o(e,t){return Array.prototype.filter.call(e.children,function(e){return r(e,t)})}function a(e,t){var i=e.element.classList,r=v.state.scrolling(t);i.contains(r)?clearTimeout(b[t]):i.add(r)}function l(e,t){b[t]=setTimeout(function(){return e.isAlive&&e.element.classList.remove(v.state.scrolling(t))},e.settings.scrollingThreshold)}function s(e,t){a(e,t),l(e,t)}function c(e){if("function"==typeof window.CustomEvent)return new CustomEvent(e);var t=document.createEvent("CustomEvent");return t.initCustomEvent(e,!1,!1,void 0),t}function h(e){return parseInt(e,10)||0}function d(e){return r(e,"input,[contenteditable]")||r(e,"select,[contenteditable]")||r(e,"textarea,[contenteditable]")||r(e,"button,[contenteditable]")}function u(e,t){return e.settings.minScrollbarLength&&(t=Math.max(t,e.settings.minScrollbarLength)),e.settings.maxScrollbarLength&&(t=Math.min(t,e.settings.maxScrollbarLength)),t}function p(e,i){var r={width:i.railXWidth};i.isRtl?r.left=i.negativeScrollAdjustment+e.scrollLeft+i.containerWidth-i.contentWidth:r.left=e.scrollLeft,i.isScrollbarXUsingBottom?r.bottom=i.scrollbarXBottom-e.scrollTop:r.top=i.scrollbarXTop+e.scrollTop,t(i.scrollbarXRail,r);var n={top:e.scrollTop,height:i.railYHeight};i.isScrollbarYUsingRight?i.isRtl?n.right=i.contentWidth-(i.negativeScrollAdjustment+e.scrollLeft)-i.scrollbarYRight-i.scrollbarYOuterWidth:n.right=i.scrollbarYRight-e.scrollLeft:i.isRtl?n.left=i.negativeScrollAdjustment+e.scrollLeft+2*i.containerWidth-i.contentWidth-i.scrollbarYLeft-i.scrollbarYOuterWidth:n.left=i.scrollbarYLeft+e.scrollLeft,t(i.scrollbarYRail,n),t(i.scrollbarX,{left:i.scrollbarXLeft,width:i.scrollbarXWidth-i.railBorderXWidth}),t(i.scrollbarY,{top:i.scrollbarYTop,height:i.scrollbarYHeight-i.railBorderYWidth})}function g(e,t){function i(t){g[u]=f+b*(t[s]-v),a(e,p),Y(e),t.stopPropagation(),t.preventDefault()}function r(){l(e,p),e.event.unbind(e.ownerDocument,"mousemove",i)}var n=t[0],o=t[1],s=t[2],c=t[3],h=t[4],d=t[5],u=t[6],p=t[7],g=e.element,f=null,v=null,b=null;e.event.bind(e[h],"mousedown",function(t){f=g[u],v=t[s],b=(e[o]-e[n])/(e[c]-e[d]),e.event.bind(e.ownerDocument,"mousemove",i),e.event.once(e.ownerDocument,"mouseup",r),t.stopPropagation(),t.preventDefault()})}var f=Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.msMatchesSelector,v={main:"ps",element:{thumb:function(e){return"ps__thumb-"+e},rail:function(e){return"ps__rail-"+e},consuming:"ps__child--consume"},state:{focus:"ps--focus",active:function(e){return"ps--active-"+e},scrolling:function(e){return"ps--scrolling-"+e}}},b={x:null,y:null},m=function(e){this.element=e,this.handlers={}},y={isEmpty:{configurable:!0}};m.prototype.bind=function(e,t){void 0===this.handlers[e]&&(this.handlers[e]=[]),this.handlers[e].push(t),this.element.addEventListener(e,t,!1)},m.prototype.unbind=function(e,t){var i=this;this.handlers[e]=this.handlers[e].filter(function(r){return!(!t||r===t)||(i.element.removeEventListener(e,r,!1),!1)})},m.prototype.unbindAll=function(){for(var e in this.handlers)this.unbind(e)},y.isEmpty.get=function(){var e=this;return Object.keys(this.handlers).every(function(t){return 0===e.handlers[t].length})},Object.defineProperties(m.prototype,y);var w=function(){this.eventElements=[]};w.prototype.eventElement=function(e){var t=this.eventElements.filter(function(t){return t.element===e})[0];return t||(t=new m(e),this.eventElements.push(t)),t},w.prototype.bind=function(e,t,i){this.eventElement(e).bind(t,i)},w.prototype.unbind=function(e,t,i){var r=this.eventElement(e);r.unbind(t,i),r.isEmpty&&this.eventElements.splice(this.eventElements.indexOf(r),1)},w.prototype.unbindAll=function(){this.eventElements.forEach(function(e){return e.unbindAll()}),this.eventElements=[]},w.prototype.once=function(e,t,i){var r=this.eventElement(e),n=function(e){r.unbind(t,n),i(e)};r.bind(t,n)};var S=function(e,t,i,r,n){var o;if(void 0===r&&(r=!0),void 0===n&&(n=!1),"top"===t)o=["contentHeight","containerHeight","scrollTop","y","up","down"];else{if("left"!==t)throw new Error("A proper axis should be provided");o=["contentWidth","containerWidth","scrollLeft","x","left","right"]}!function(e,t,i,r,n){var o=i[0],a=i[1],l=i[2],h=i[3],d=i[4],u=i[5];void 0===r&&(r=!0),void 0===n&&(n=!1);var p=e.element;e.reach[h]=null,p[l]<1&&(e.reach[h]="start"),p[l]>e[o]-e[a]-1&&(e.reach[h]="end"),t&&(p.dispatchEvent(c("ps-scroll-"+h)),t<0?p.dispatchEvent(c("ps-scroll-"+d)):t>0&&p.dispatchEvent(c("ps-scroll-"+u)),r&&s(e,h)),e.reach[h]&&(t||n)&&p.dispatchEvent(c("ps-"+h+"-reach-"+e.reach[h]))}(e,i,o,r,n)},M={isWebKit:document&&"WebkitAppearance"in document.documentElement.style,supportsTouch:window&&("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:navigator&&navigator.msMaxTouchPoints},Y=function(e){var t=e.element;e.containerWidth=t.clientWidth,e.containerHeight=t.clientHeight,e.contentWidth=t.scrollWidth,e.contentHeight=t.scrollHeight,t.contains(e.scrollbarXRail)||(o(t,v.element.rail("x")).forEach(function(e){return n(e)}),t.appendChild(e.scrollbarXRail)),t.contains(e.scrollbarYRail)||(o(t,v.element.rail("y")).forEach(function(e){return n(e)}),t.appendChild(e.scrollbarYRail)),!e.settings.suppressScrollX&&e.containerWidth+e.settings.scrollXMarginOffset<e.contentWidth?(e.scrollbarXActive=!0,e.railXWidth=e.containerWidth-e.railXMarginWidth,e.railXRatio=e.containerWidth/e.railXWidth,e.scrollbarXWidth=u(e,h(e.railXWidth*e.containerWidth/e.contentWidth)),e.scrollbarXLeft=h((e.negativeScrollAdjustment+t.scrollLeft)*(e.railXWidth-e.scrollbarXWidth)/(e.contentWidth-e.containerWidth))):e.scrollbarXActive=!1,!e.settings.suppressScrollY&&e.containerHeight+e.settings.scrollYMarginOffset<e.contentHeight?(e.scrollbarYActive=!0,e.railYHeight=e.containerHeight-e.railYMarginHeight,e.railYRatio=e.containerHeight/e.railYHeight,e.scrollbarYHeight=u(e,h(e.railYHeight*e.containerHeight/e.contentHeight)),e.scrollbarYTop=h(t.scrollTop*(e.railYHeight-e.scrollbarYHeight)/(e.contentHeight-e.containerHeight))):e.scrollbarYActive=!1,e.scrollbarXLeft>=e.railXWidth-e.scrollbarXWidth&&(e.scrollbarXLeft=e.railXWidth-e.scrollbarXWidth),e.scrollbarYTop>=e.railYHeight-e.scrollbarYHeight&&(e.scrollbarYTop=e.railYHeight-e.scrollbarYHeight),p(t,e),e.scrollbarXActive?t.classList.add(v.state.active("x")):(t.classList.remove(v.state.active("x")),e.scrollbarXWidth=0,e.scrollbarXLeft=0,t.scrollLeft=0),e.scrollbarYActive?t.classList.add(v.state.active("y")):(t.classList.remove(v.state.active("y")),e.scrollbarYHeight=0,e.scrollbarYTop=0,t.scrollTop=0)},T={"click-rail":function(e){e.event.bind(e.scrollbarY,"mousedown",function(e){return e.stopPropagation()}),e.event.bind(e.scrollbarYRail,"mousedown",function(t){var i=t.pageY-window.pageYOffset-e.scrollbarYRail.getBoundingClientRect().top>e.scrollbarYTop?1:-1;e.element.scrollTop+=i*e.containerHeight,Y(e),t.stopPropagation()}),e.event.bind(e.scrollbarX,"mousedown",function(e){return e.stopPropagation()}),e.event.bind(e.scrollbarXRail,"mousedown",function(t){var i=t.pageX-window.pageXOffset-e.scrollbarXRail.getBoundingClientRect().left>e.scrollbarXLeft?1:-1;e.element.scrollLeft+=i*e.containerWidth,Y(e),t.stopPropagation()})},"drag-thumb":function(e){g(e,["containerWidth","contentWidth","pageX","railXWidth","scrollbarX","scrollbarXWidth","scrollLeft","x"]),g(e,["containerHeight","contentHeight","pageY","railYHeight","scrollbarY","scrollbarYHeight","scrollTop","y"])},keyboard:function(e){var t=e.element,i=function(){return r(t,":hover")},n=function(){return r(e.scrollbarX,":focus")||r(e.scrollbarY,":focus")};e.event.bind(e.ownerDocument,"keydown",function(r){if(!(r.isDefaultPrevented&&r.isDefaultPrevented()||r.defaultPrevented)&&(i()||n())){var o=document.activeElement?document.activeElement:e.ownerDocument.activeElement;if(o){if("IFRAME"===o.tagName)o=o.contentDocument.activeElement;else for(;o.shadowRoot;)o=o.shadowRoot.activeElement;if(d(o))return}var a=0,l=0;switch(r.which){case 37:a=r.metaKey?-e.contentWidth:r.altKey?-e.containerWidth:-30;break;case 38:l=r.metaKey?e.contentHeight:r.altKey?e.containerHeight:30;break;case 39:a=r.metaKey?e.contentWidth:r.altKey?e.containerWidth:30;break;case 40:l=r.metaKey?-e.contentHeight:r.altKey?-e.containerHeight:-30;break;case 32:l=r.shiftKey?e.containerHeight:-e.containerHeight;break;case 33:l=e.containerHeight;break;case 34:l=-e.containerHeight;break;case 36:l=e.contentHeight;break;case 35:l=-e.contentHeight;break;default:return}e.settings.suppressScrollX&&0!==a||e.settings.suppressScrollY&&0!==l||(t.scrollTop-=l,t.scrollLeft+=a,Y(e),function(i,r){var n=t.scrollTop;if(0===i){if(!e.scrollbarYActive)return!1;if(0===n&&r>0||n>=e.contentHeight-e.containerHeight&&r<0)return!e.settings.wheelPropagation}var o=t.scrollLeft;if(0===r){if(!e.scrollbarXActive)return!1;if(0===o&&i<0||o>=e.contentWidth-e.containerWidth&&i>0)return!e.settings.wheelPropagation}return!0}(a,l)&&r.preventDefault())}})},wheel:function(t){function i(t,i,r){if(!M.isWebKit&&n.querySelector("select:focus"))return!0;if(!n.contains(t))return!1;for(var o=t;o&&o!==n;){if(o.classList.contains(v.element.consuming))return!0;var a=e(o);if([a.overflow,a.overflowX,a.overflowY].join("").match(/(scroll|auto)/)){var l=o.scrollHeight-o.clientHeight;if(l>0&&!(0===o.scrollTop&&r>0||o.scrollTop===l&&r<0))return!0;var s=o.scrollLeft-o.clientWidth;if(s>0&&!(0===o.scrollLeft&&i<0||o.scrollLeft===s&&i>0))return!0}o=o.parentNode}return!1}function r(e){var r=function(e){var t=e.deltaX,i=-1*e.deltaY;return void 0!==t&&void 0!==i||(t=-1*e.wheelDeltaX/6,i=e.wheelDeltaY/6),e.deltaMode&&1===e.deltaMode&&(t*=10,i*=10),t!=t&&i!=i&&(t=0,i=e.wheelDelta),e.shiftKey?[-i,-t]:[t,i]}(e),o=r[0],a=r[1];if(!i(e.target,o,a)){var l=!1;t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?(a?n.scrollTop-=a*t.settings.wheelSpeed:n.scrollTop+=o*t.settings.wheelSpeed,l=!0):t.scrollbarXActive&&!t.scrollbarYActive&&(o?n.scrollLeft+=o*t.settings.wheelSpeed:n.scrollLeft-=a*t.settings.wheelSpeed,l=!0):(n.scrollTop-=a*t.settings.wheelSpeed,n.scrollLeft+=o*t.settings.wheelSpeed),Y(t),(l=l||function(e,i){var r=n.scrollTop;if(0===e){if(!t.scrollbarYActive)return!1;if(0===r&&i>0||r>=t.contentHeight-t.containerHeight&&i<0)return!t.settings.wheelPropagation}var o=n.scrollLeft;if(0===i){if(!t.scrollbarXActive)return!1;if(0===o&&e<0||o>=t.contentWidth-t.containerWidth&&e>0)return!t.settings.wheelPropagation}return!0}(o,a))&&!e.ctrlKey&&(e.stopPropagation(),e.preventDefault())}}var n=t.element;void 0!==window.onwheel?t.event.bind(n,"wheel",r):void 0!==window.onmousewheel&&t.event.bind(n,"mousewheel",r)},touch:function(e){function t(t,i){var r=h.scrollTop,n=h.scrollLeft,o=Math.abs(t),a=Math.abs(i);if(a>o){if(i<0&&r===e.contentHeight-e.containerHeight||i>0&&0===r)return{stop:!e.settings.swipePropagation,prevent:0===window.scrollY}}else if(o>a&&(t<0&&n===e.contentWidth-e.containerWidth||t>0&&0===n))return{stop:!e.settings.swipePropagation,prevent:!0};return{stop:!0,prevent:!0}}function i(t,i){h.scrollTop-=i,h.scrollLeft-=t,Y(e)}function r(){f=!0}function n(){f=!1}function o(e){return e.targetTouches?e.targetTouches[0]:e}function a(e){return!(e.pointerType&&"pen"===e.pointerType&&0===e.buttons||(!e.targetTouches||1!==e.targetTouches.length)&&(!e.pointerType||"mouse"===e.pointerType||e.pointerType===e.MSPOINTER_TYPE_MOUSE))}function l(e){if(a(e)){v=!0;var t=o(e);d.pageX=t.pageX,d.pageY=t.pageY,u=(new Date).getTime(),null!==g&&clearInterval(g),e.stopPropagation()}}function s(r){if(!v&&e.settings.swipePropagation&&l(r),!f&&v&&a(r)){var n=o(r),s={pageX:n.pageX,pageY:n.pageY},c=s.pageX-d.pageX,h=s.pageY-d.pageY;i(c,h),d=s;var g=(new Date).getTime(),b=g-u;b>0&&(p.x=c/b,p.y=h/b,u=g);var m=t(c,h),y=m.stop,w=m.prevent;y&&r.stopPropagation(),w&&r.preventDefault()}}function c(){!f&&v&&(v=!1,e.settings.swipeEasing&&(clearInterval(g),g=setInterval(function(){e.isInitialized?clearInterval(g):p.x||p.y?Math.abs(p.x)<.01&&Math.abs(p.y)<.01?clearInterval(g):(i(30*p.x,30*p.y),p.x*=.8,p.y*=.8):clearInterval(g)},10)))}if(M.supportsTouch||M.supportsIePointer){var h=e.element,d={},u=0,p={},g=null,f=!1,v=!1;M.supportsTouch?(e.event.bind(window,"touchstart",r),e.event.bind(window,"touchend",n),e.event.bind(h,"touchstart",l),e.event.bind(h,"touchmove",s),e.event.bind(h,"touchend",c)):M.supportsIePointer&&(window.PointerEvent?(e.event.bind(window,"pointerdown",r),e.event.bind(window,"pointerup",n),e.event.bind(h,"pointerdown",l),e.event.bind(h,"pointermove",s),e.event.bind(h,"pointerup",c)):window.MSPointerEvent&&(e.event.bind(window,"MSPointerDown",r),e.event.bind(window,"MSPointerUp",n),e.event.bind(h,"MSPointerDown",l),e.event.bind(h,"MSPointerMove",s),e.event.bind(h,"MSPointerUp",c)))}}},k=function(r,n){var o=this;if(void 0===n&&(n={}),"string"==typeof r&&(r=document.querySelector(r)),!r||!r.nodeName)throw new Error("no element is specified to initialize PerfectScrollbar");for(var a in this.element=r,r.classList.add(v.main),this.settings={handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollingThreshold:1e3,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipePropagation:!0,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!1,wheelSpeed:1},n)o.settings[a]=n[a];this.containerWidth=null,this.containerHeight=null,this.contentWidth=null,this.contentHeight=null;var l=function(){return r.classList.add(v.state.focus)},s=function(){return r.classList.remove(v.state.focus)};this.isRtl="rtl"===e(r).direction,this.isNegativeScroll=function(){var e=r.scrollLeft,t=null;return r.scrollLeft=-1,t=r.scrollLeft<0,r.scrollLeft=e,t}(),this.negativeScrollAdjustment=this.isNegativeScroll?r.scrollWidth-r.clientWidth:0,this.event=new w,this.ownerDocument=r.ownerDocument||document,this.scrollbarXRail=i(v.element.rail("x")),r.appendChild(this.scrollbarXRail),this.scrollbarX=i(v.element.thumb("x")),this.scrollbarXRail.appendChild(this.scrollbarX),this.scrollbarX.setAttribute("tabindex",0),this.event.bind(this.scrollbarX,"focus",l),this.event.bind(this.scrollbarX,"blur",s),this.scrollbarXActive=null,this.scrollbarXWidth=null,this.scrollbarXLeft=null;var c=e(this.scrollbarXRail);this.scrollbarXBottom=parseInt(c.bottom,10),isNaN(this.scrollbarXBottom)?(this.isScrollbarXUsingBottom=!1,this.scrollbarXTop=h(c.top)):this.isScrollbarXUsingBottom=!0,this.railBorderXWidth=h(c.borderLeftWidth)+h(c.borderRightWidth),t(this.scrollbarXRail,{display:"block"}),this.railXMarginWidth=h(c.marginLeft)+h(c.marginRight),t(this.scrollbarXRail,{display:""}),this.railXWidth=null,this.railXRatio=null,this.scrollbarYRail=i(v.element.rail("y")),r.appendChild(this.scrollbarYRail),this.scrollbarY=i(v.element.thumb("y")),this.scrollbarYRail.appendChild(this.scrollbarY),this.scrollbarY.setAttribute("tabindex",0),this.event.bind(this.scrollbarY,"focus",l),this.event.bind(this.scrollbarY,"blur",s),this.scrollbarYActive=null,this.scrollbarYHeight=null,this.scrollbarYTop=null;var d=e(this.scrollbarYRail);this.scrollbarYRight=parseInt(d.right,10),isNaN(this.scrollbarYRight)?(this.isScrollbarYUsingRight=!1,this.scrollbarYLeft=h(d.left)):this.isScrollbarYUsingRight=!0,this.scrollbarYOuterWidth=this.isRtl?function(t){var i=e(t);return h(i.width)+h(i.paddingLeft)+h(i.paddingRight)+h(i.borderLeftWidth)+h(i.borderRightWidth)}(this.scrollbarY):null,this.railBorderYWidth=h(d.borderTopWidth)+h(d.borderBottomWidth),t(this.scrollbarYRail,{display:"block"}),this.railYMarginHeight=h(d.marginTop)+h(d.marginBottom),t(this.scrollbarYRail,{display:""}),this.railYHeight=null,this.railYRatio=null,this.reach={x:r.scrollLeft<=0?"start":r.scrollLeft>=this.contentWidth-this.containerWidth?"end":null,y:r.scrollTop<=0?"start":r.scrollTop>=this.contentHeight-this.containerHeight?"end":null},this.isAlive=!0,this.settings.handlers.forEach(function(e){return T[e](o)}),this.lastScrollTop=r.scrollTop,this.lastScrollLeft=r.scrollLeft,this.event.bind(this.element,"scroll",function(e){return o.onScroll(e)}),Y(this)};return k.prototype.update=function(){this.isAlive&&(this.negativeScrollAdjustment=this.isNegativeScroll?this.element.scrollWidth-this.element.clientWidth:0,t(this.scrollbarXRail,{display:"block"}),t(this.scrollbarYRail,{display:"block"}),this.railXMarginWidth=h(e(this.scrollbarXRail).marginLeft)+h(e(this.scrollbarXRail).marginRight),this.railYMarginHeight=h(e(this.scrollbarYRail).marginTop)+h(e(this.scrollbarYRail).marginBottom),t(this.scrollbarXRail,{display:"none"}),t(this.scrollbarYRail,{display:"none"}),Y(this),S(this,"top",0,!1,!0),S(this,"left",0,!1,!0),t(this.scrollbarXRail,{display:""}),t(this.scrollbarYRail,{display:""}))},k.prototype.onScroll=function(e){this.isAlive&&(Y(this),S(this,"top",this.element.scrollTop-this.lastScrollTop),S(this,"left",this.element.scrollLeft-this.lastScrollLeft),this.lastScrollTop=this.element.scrollTop,this.lastScrollLeft=this.element.scrollLeft)},k.prototype.destroy=function(){this.isAlive&&(this.event.unbindAll(),n(this.scrollbarX),n(this.scrollbarY),n(this.scrollbarXRail),n(this.scrollbarYRail),this.removePsClasses(),this.element=null,this.scrollbarX=null,this.scrollbarY=null,this.scrollbarXRail=null,this.scrollbarYRail=null,this.isAlive=!1)},k.prototype.removePsClasses=function(){this.element.className=this.element.className.split(" ").filter(function(e){return!e.match(/^ps([-_].+|)$/)}).join(" ")},k}()},function(e,t){var i,r,n,o;i=jQuery,r=10,n=.95,o={series:{pie:{show:!1,radius:"auto",innerRadius:0,startAngle:1.5,tilt:1,shadow:{left:5,top:15,alpha:.02},offset:{top:0,left:"auto"},stroke:{color:"#fff",width:1},label:{show:"auto",formatter:function(e,t){return"<div style='font-size:x-small;text-align:center;padding:2px;color:"+t.color+";'>"+e+"<br/>"+Math.round(t.percent)+"%</div>"},radius:1,background:{color:null,opacity:0},threshold:0},combine:{threshold:-1,color:null,label:"Other"},highlight:{opacity:.5}}}},i.plot.plugins.push({init:function(e){var t=null,o=null,a=null,l=null,s=null,c=null,h=!1,d=null,u=[];function p(e,r,n){h||(h=!0,t=e.getCanvas(),o=i(t).parent(),a=e.getOptions(),e.setData(function(e){for(var t=0,r=0,n=0,o=a.series.pie.combine.color,l=[],s=0;s<e.length;++s){var c=e[s].data;i.isArray(c)&&1==c.length&&(c=c[0]),i.isArray(c)?!isNaN(parseFloat(c[1]))&&isFinite(c[1])?c[1]=+c[1]:c[1]=0:c=!isNaN(parseFloat(c))&&isFinite(c)?[1,+c]:[1,0],e[s].data=[c]}for(var s=0;s<e.length;++s)t+=e[s].data[0][1];for(var s=0;s<e.length;++s){var c=e[s].data[0][1];c/t<=a.series.pie.combine.threshold&&(r+=c,n++,o||(o=e[s].color))}for(var s=0;s<e.length;++s){var c=e[s].data[0][1];(n<2||c/t>a.series.pie.combine.threshold)&&l.push(i.extend(e[s],{data:[[1,c]],color:e[s].color,label:e[s].label,angle:c*Math.PI*2/t,percent:c/(t/100)}))}return n>1&&l.push({data:[[1,r]],color:o,label:a.series.pie.combine.label,angle:r*Math.PI*2/t,percent:r/(t/100)}),l}(e.getData())))}function g(e,t){if(o){var u=e.getPlaceholder().width(),p=e.getPlaceholder().height(),g=o.children().filter(".legend").children().width()||0;d=t,h=!1,l=Math.min(u,p/a.series.pie.tilt)/2,c=p/2+a.series.pie.offset.top,s=u/2,"auto"==a.series.pie.offset.left?(a.legend.position.match("w")?s+=g/2:s-=g/2,s<l?s=l:s>u-l&&(s=u-l)):s+=a.series.pie.offset.left;var v=e.getData(),b=0;do{b>0&&(l*=n),b+=1,m(),a.series.pie.tilt<=.8&&y()}while(!w()&&b<r);b>=r&&(m(),o.prepend("<div class='error'>Could not draw pie with labels contained inside canvas</div>")),e.setSeries&&e.insertLegend&&(e.setSeries(v),e.insertLegend())}function m(){d.clearRect(0,0,u,p),o.children().filter(".pieLabel, .pieLabelBackground").remove()}function y(){var e=a.series.pie.shadow.left,t=a.series.pie.shadow.top,i=a.series.pie.shadow.alpha,r=a.series.pie.radius>1?a.series.pie.radius:l*a.series.pie.radius;if(!(r>=u/2-e||r*a.series.pie.tilt>=p/2-t||r<=10)){d.save(),d.translate(e,t),d.globalAlpha=i,d.fillStyle="#000",d.translate(s,c),d.scale(1,a.series.pie.tilt);for(var n=1;n<=10;n++)d.beginPath(),d.arc(0,0,r,0,2*Math.PI,!1),d.fill(),r-=n;d.restore()}}function w(){var e=Math.PI*a.series.pie.startAngle,t=a.series.pie.radius>1?a.series.pie.radius:l*a.series.pie.radius;d.save(),d.translate(s,c),d.scale(1,a.series.pie.tilt),d.save();for(var r=e,n=0;n<v.length;++n)v[n].startAngle=r,h(v[n].angle,v[n].color,!0);if(d.restore(),a.series.pie.stroke.width>0){for(d.save(),d.lineWidth=a.series.pie.stroke.width,r=e,n=0;n<v.length;++n)h(v[n].angle,a.series.pie.stroke.color,!1);d.restore()}return f(d),d.restore(),!a.series.pie.label.show||function(){for(var t=e,r=a.series.pie.label.radius>1?a.series.pie.label.radius:l*a.series.pie.label.radius,n=0;n<v.length;++n){if(v[n].percent>=100*a.series.pie.label.threshold&&!h(v[n],t,n))return!1;t+=v[n].angle}return!0;function h(e,t,n){if(0==e.data[0][1])return!0;var l,h=a.legend.labelFormatter,d=a.series.pie.label.formatter;l=h?h(e.label,e):e.label,d&&(l=d(l,e));var g=(t+e.angle+t)/2,f=s+Math.round(Math.cos(g)*r),v=c+Math.round(Math.sin(g)*r)*a.series.pie.tilt,b="<span class='pieLabel' id='pieLabel"+n+"' style='position:absolute;top:"+v+"px;left:"+f+"px;'>"+l+"</span>";o.append(b);var m=o.children("#pieLabel"+n),y=v-m.height()/2,w=f-m.width()/2;if(m.css("top",y),m.css("left",w),0-y>0||0-w>0||p-(y+m.height())<0||u-(w+m.width())<0)return!1;if(0!=a.series.pie.label.background.opacity){var S=a.series.pie.label.background.color;null==S&&(S=e.color);var M="top:"+y+"px;left:"+w+"px;";i("<div class='pieLabelBackground' style='position:absolute;width:"+m.width()+"px;height:"+m.height()+"px;"+M+"background-color:"+S+";'></div>").css("opacity",a.series.pie.label.background.opacity).insertBefore(m)}return!0}}();function h(e,i,n){e<=0||isNaN(e)||(n?d.fillStyle=i:(d.strokeStyle=i,d.lineJoin="round"),d.beginPath(),Math.abs(e-2*Math.PI)>1e-9&&d.moveTo(0,0),d.arc(0,0,t,r,r+e/2,!1),d.arc(0,0,t,r+e/2,r+e,!1),d.closePath(),r+=e,n?d.fill():d.stroke())}}}function f(e){if(a.series.pie.innerRadius>0){e.save();var t=a.series.pie.innerRadius>1?a.series.pie.innerRadius:l*a.series.pie.innerRadius;e.globalCompositeOperation="destination-out",e.beginPath(),e.fillStyle=a.series.pie.stroke.color,e.arc(0,0,t,0,2*Math.PI,!1),e.fill(),e.closePath(),e.restore(),e.save(),e.beginPath(),e.strokeStyle=a.series.pie.stroke.color,e.arc(0,0,t,0,2*Math.PI,!1),e.stroke(),e.closePath(),e.restore()}}function v(e,t){for(var i=!1,r=-1,n=e.length,o=n-1;++r<n;o=r)(e[r][1]<=t[1]&&t[1]<e[o][1]||e[o][1]<=t[1]&&t[1]<e[r][1])&&t[0]<(e[o][0]-e[r][0])*(t[1]-e[r][1])/(e[o][1]-e[r][1])+e[r][0]&&(i=!i);return i}function b(e){y("plothover",e)}function m(e){y("plotclick",e)}function y(t,i){var r=e.offset(),n=function(t,i){for(var r,n,o=e.getData(),a=e.getOptions(),h=a.series.pie.radius>1?a.series.pie.radius:l*a.series.pie.radius,u=0;u<o.length;++u){var p=o[u];if(p.pie.show){if(d.save(),d.beginPath(),d.moveTo(0,0),d.arc(0,0,h,p.startAngle,p.startAngle+p.angle/2,!1),d.arc(0,0,h,p.startAngle+p.angle/2,p.startAngle+p.angle,!1),d.closePath(),r=t-s,n=i-c,d.isPointInPath){if(d.isPointInPath(t-s,i-c))return d.restore(),{datapoint:[p.percent,p.data],dataIndex:0,series:p,seriesIndex:u}}else if(v([[0,0],[h*Math.cos(p.startAngle),h*Math.sin(p.startAngle)],[h*Math.cos(p.startAngle+p.angle/4),h*Math.sin(p.startAngle+p.angle/4)],[h*Math.cos(p.startAngle+p.angle/2),h*Math.sin(p.startAngle+p.angle/2)],[h*Math.cos(p.startAngle+p.angle/1.5),h*Math.sin(p.startAngle+p.angle/1.5)],[h*Math.cos(p.startAngle+p.angle),h*Math.sin(p.startAngle+p.angle)]],[r,n]))return d.restore(),{datapoint:[p.percent,p.data],dataIndex:0,series:p,seriesIndex:u};d.restore()}}return null}(parseInt(i.pageX-r.left),parseInt(i.pageY-r.top));if(a.grid.autoHighlight)for(var h=0;h<u.length;++h){var p=u[h];p.auto!=t||n&&p.series==n.series||w(p.series)}n&&function(t,i){var r=S(t);-1==r?(u.push({series:t,auto:i}),e.triggerRedrawOverlay()):i||(u[r].auto=!1)}(n.series,t);var g={pageX:i.pageX,pageY:i.pageY};o.trigger(t,[g,n])}function w(t){null==t&&(u=[],e.triggerRedrawOverlay());var i=S(t);-1!=i&&(u.splice(i,1),e.triggerRedrawOverlay())}function S(e){for(var t=0;t<u.length;++t)if(u[t].series==e)return t;return-1}e.hooks.processOptions.push(function(e,t){t.series.pie.show&&(t.grid.show=!1,"auto"==t.series.pie.label.show&&(t.legend.show?t.series.pie.label.show=!1:t.series.pie.label.show=!0),"auto"==t.series.pie.radius&&(t.series.pie.label.show?t.series.pie.radius=.75:t.series.pie.radius=1),t.series.pie.tilt>1?t.series.pie.tilt=1:t.series.pie.tilt<0&&(t.series.pie.tilt=0))}),e.hooks.bindEvents.push(function(e,t){var i=e.getOptions();i.series.pie.show&&(i.grid.hoverable&&t.unbind("mousemove").mousemove(b),i.grid.clickable&&t.unbind("click").click(m))}),e.hooks.processDatapoints.push(function(e,t,i,r){e.getOptions().series.pie.show&&p(e)}),e.hooks.drawOverlay.push(function(e,t){e.getOptions().series.pie.show&&function(e,t){var i=e.getOptions(),r=i.series.pie.radius>1?i.series.pie.radius:l*i.series.pie.radius;t.save(),t.translate(s,c),t.scale(1,i.series.pie.tilt);for(var n=0;n<u.length;++n)o(u[n].series);function o(e){e.angle<=0||isNaN(e.angle)||(t.fillStyle="rgba(255, 255, 255, "+i.series.pie.highlight.opacity+")",t.beginPath(),Math.abs(e.angle-2*Math.PI)>1e-9&&t.moveTo(0,0),t.arc(0,0,r,e.startAngle,e.startAngle+e.angle/2,!1),t.arc(0,0,r,e.startAngle+e.angle/2,e.startAngle+e.angle,!1),t.closePath(),t.fill())}f(t),t.restore()}(e,t)}),e.hooks.draw.push(function(e,t){e.getOptions().series.pie.show&&g(e,t)})},options:o,name:"pie",version:"1.1"})},function(e,t){!function(e){function t(e,t){return t*Math.floor(e/t)}function i(e,t,i,r){if("function"==typeof e.strftime)return e.strftime(t);var n,o=function(e,t){return t=""+(null==t?"0":t),1==(e=""+e).length?t+e:e},a=[],l=!1,s=e.getHours(),c=s<12;null==i&&(i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),null==r&&(r=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]),n=s>12?s-12:0==s?12:s;for(var h=0;h<t.length;++h){var d=t.charAt(h);if(l){switch(d){case"a":d=""+r[e.getDay()];break;case"b":d=""+i[e.getMonth()];break;case"d":d=o(e.getDate());break;case"e":d=o(e.getDate()," ");break;case"h":case"H":d=o(s);break;case"I":d=o(n);break;case"l":d=o(n," ");break;case"m":d=o(e.getMonth()+1);break;case"M":d=o(e.getMinutes());break;case"q":d=""+(Math.floor(e.getMonth()/3)+1);break;case"S":d=o(e.getSeconds());break;case"y":d=o(e.getFullYear()%100);break;case"Y":d=""+e.getFullYear();break;case"p":d=c?"am":"pm";break;case"P":d=c?"AM":"PM";break;case"w":d=""+e.getDay()}a.push(d),l=!1}else"%"==d?l=!0:a.push(d)}return a.join("")}function r(e){function t(e,t,i,r){e[t]=function(){return i[r].apply(i,arguments)}}var i={date:e};null!=e.strftime&&t(i,"strftime",e,"strftime"),t(i,"getTime",e,"getTime"),t(i,"setTime",e,"setTime");for(var r=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds"],n=0;n<r.length;n++)t(i,"get"+r[n],e,"getUTC"+r[n]),t(i,"set"+r[n],e,"setUTC"+r[n]);return i}function n(e,t){if("browser"==t.timezone)return new Date(e);if(t.timezone&&"utc"!=t.timezone){if("undefined"!=typeof timezoneJS&&void 0!==timezoneJS.Date){var i=new timezoneJS.Date;return i.setTimezone(t.timezone),i.setTime(e),i}return r(new Date(e))}return r(new Date(e))}var o={second:1e3,minute:6e4,hour:36e5,day:864e5,month:2592e6,quarter:7776e6,year:525949.2*60*1e3},a=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"]],l=a.concat([[3,"month"],[6,"month"],[1,"year"]]),s=a.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);e.plot.plugins.push({init:function(r){r.hooks.processOptions.push(function(r,a){e.each(r.getAxes(),function(e,r){var a=r.options;"time"==a.mode&&(r.tickGenerator=function(e){var i=[],r=n(e.min,a),c=0,h=a.tickSize&&"quarter"===a.tickSize[1]||a.minTickSize&&"quarter"===a.minTickSize[1]?s:l;null!=a.minTickSize&&(c="number"==typeof a.tickSize?a.tickSize:a.minTickSize[0]*o[a.minTickSize[1]]);for(var d=0;d<h.length-1&&!(e.delta<(h[d][0]*o[h[d][1]]+h[d+1][0]*o[h[d+1][1]])/2&&h[d][0]*o[h[d][1]]>=c);++d);var u=h[d][0],p=h[d][1];if("year"==p){if(null!=a.minTickSize&&"year"==a.minTickSize[1])u=Math.floor(a.minTickSize[0]);else{var g=Math.pow(10,Math.floor(Math.log(e.delta/o.year)/Math.LN10)),f=e.delta/o.year/g;u=f<1.5?1:f<3?2:f<7.5?5:10,u*=g}u<1&&(u=1)}e.tickSize=a.tickSize||[u,p];var v=e.tickSize[0];p=e.tickSize[1];var b=v*o[p];"second"==p?r.setSeconds(t(r.getSeconds(),v)):"minute"==p?r.setMinutes(t(r.getMinutes(),v)):"hour"==p?r.setHours(t(r.getHours(),v)):"month"==p?r.setMonth(t(r.getMonth(),v)):"quarter"==p?r.setMonth(3*t(r.getMonth()/3,v)):"year"==p&&r.setFullYear(t(r.getFullYear(),v)),r.setMilliseconds(0),b>=o.minute&&r.setSeconds(0),b>=o.hour&&r.setMinutes(0),b>=o.day&&r.setHours(0),b>=4*o.day&&r.setDate(1),b>=2*o.month&&r.setMonth(t(r.getMonth(),3)),b>=2*o.quarter&&r.setMonth(t(r.getMonth(),6)),b>=o.year&&r.setMonth(0);var m,y=0,w=Number.NaN;do{if(m=w,w=r.getTime(),i.push(w),"month"==p||"quarter"==p)if(v<1){r.setDate(1);var S=r.getTime();r.setMonth(r.getMonth()+("quarter"==p?3:1));var M=r.getTime();r.setTime(w+y*o.hour+(M-S)*v),y=r.getHours(),r.setHours(0)}else r.setMonth(r.getMonth()+v*("quarter"==p?3:1));else"year"==p?r.setFullYear(r.getFullYear()+v):r.setTime(w+b)}while(w<e.max&&w!=m);return i},r.tickFormatter=function(e,t){var r=n(e,t.options);if(null!=a.timeformat)return i(r,a.timeformat,a.monthNames,a.dayNames);var l=t.options.tickSize&&"quarter"==t.options.tickSize[1]||t.options.minTickSize&&"quarter"==t.options.minTickSize[1],s=t.tickSize[0]*o[t.tickSize[1]],c=t.max-t.min,h=a.twelveHourClock?" %p":"",d=a.twelveHourClock?"%I":"%H";return i(r,s<o.minute?d+":%M:%S"+h:s<o.day?c<2*o.day?d+":%M"+h:"%b %d "+d+":%M"+h:s<o.month?"%b %d":l&&s<o.quarter||!l&&s<o.year?c<o.year?"%b":"%b %Y":l&&s<o.year?c<o.year?"Q%q":"Q%q %Y":"%Y",a.monthNames,a.dayNames)})})})},options:{xaxis:{timezone:null,timeformat:null,twelveHourClock:!1,monthNames:null}},name:"time",version:"1.0"}),e.plot.formatDate=i,e.plot.dateGenerator=n}(jQuery)},,,function(e,t,i){"use strict";i.r(t);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};var n=i(2),o=i(1),a=i.n(o),l=i(3),s=i.n(l),c=i(4),h=i.n(c),d=(i(7),i(0)),u=i.n(d);function p(e,t,i,r){var n,o=r.panel;t=t.find(".piechart-panel__chart");var l=u()('<div id="tooltip">');function s(e,t){var i=t.data[0][t.data[0].length-1],n=2,o="<div style='font-size:"+r.panel.fontSize+";text-align:center;padding:2px;color:"+t.color+";'>"+e+"<br/>";return r.panel.legend.percentageDecimals&&(n=r.panel.legend.percentageDecimals),r.panel.legend.values&&r.panel.legend.percentage?o+r.formatValue(i)+"<br/>"+t.percent.toFixed(n)+"%</div>":r.panel.legend.values?o+r.formatValue(i)+"</div>":r.panel.legend.percentage?o+t.percent.toFixed(n)+"%</div>":o+"</div>"}function c(){var e=t.width(),i=r.height-function(e){if(!r.panel.legend.show||"Right side"===r.panel.legendType||"On graph"===r.panel.legendType)return 20;if("Under graph"===r.panel.legendType&&r.panel.legend.percentage||r.panel.legend.values){var t=parseInt(r.panel.breakPoint,10)/100,i=23+20*n.length;return Math.min(i,Math.floor(e*t))}return 0}(r.height),c=Math.min(e,i),h=u()("<div></div>"),d={margin:"auto",position:"relative",paddingBottom:"20px",height:c+"px"};h.css(d);var p={legend:{show:!1},series:{pie:{radius:1,innerRadius:0,show:!0,stroke:{color:u()("body").css("background-color"),width:parseFloat(r.panel.strokeWidth).toFixed(1)},label:{show:r.panel.legend.show&&"On graph"===r.panel.legendType,formatter:s},highlight:{opacity:0},combine:{threshold:r.panel.combine.threshold,label:r.panel.combine.label}}},grid:{hoverable:!0,clickable:!1}};"donut"===o.pieType&&(p.series.pie.innerRadius=.5),n=r.data;for(var g=0;g<n.length;g++){var f=n[g];r.hiddenSeries[f.label]&&(f.data={})}o.legend.sort&&(r.panel.valueName!==o.legend.sort&&(o.legend.sort=r.panel.valueName),!0===o.legend.sortDesc?n.sort(function(e,t){return t.legendData-e.legendData}):n.sort(function(e,t){return e.legendData-t.legendData})),t.html(h),u.a.plot(h,n,p),h.bind("plothover",function(e,t,i){if(i){var n,o=parseFloat(i.series.percent).toFixed(2),s=r.formatValue(i.series.data[0][1]);n='<div class="piechart-tooltip-small"><div class="piechart-tooltip-time">',n+='<div class="piechart-tooltip-value">'+a.a.escape(i.series.label)+": "+s,n+=" ("+o+"%)</div>",n+="</div></div>",l.html(n).place_tt(t.pageX+20,t.pageY)}else l.detach()})}function h(e){r.data&&(n=r.data,0===r.data.length?t.html('<div class="datapoints-warning"><span class="small">No data points</span></div>'):c(),e&&r.renderingCompleted())}r.events.on("render",function(){"Right side"===o.legendType?(h(!1),setTimeout(function(){h(!0)},50)):h(!0)})}var g=i(5),f=i.n(g),v=(i(8),i(6)),b=i.n(v);f.a.module("grafana.directives").directive("piechartLegend",["popoverSrv","$timeout",function(e,t){return{link:function(i,r){var n,o,l,s,c,h=u()('<div class="piechart-legend__container"></div>'),d=!0,p=i.ctrl,g=p.panel;function f(e){return e.parents("[data-series-index]").data("series-index")}function v(e){var t=f(u()(e.currentTarget)),i=l[t],r=u()(h.children("tbody")).scrollTop();p.toggleSeries(i),void 0!==r&&u()(h.children("tbody")).scrollTop(r)}function m(e){var t=u()(e.currentTarget).data("stat");if(t!==g.legend.sort&&(g.legend.sortDesc=null),!1===g.legend.sortDesc)return g.legend.sort=null,g.legend.sortDesc=null,void p.render();g.legend.sortDesc=!g.legend.sortDesc,g.legend.sort=t,p.render()}function y(i){if(!u()(i.target).parents(".popover").length){var r=u()(i.currentTarget).find(".fa-minus"),n=f(r),a=o[n];t(function(){e.show({element:r[0],position:"right center",template:'<series-color-picker-popover series="series" onToggleAxis="toggleAxis" onColorChange="colorSelected"></series-color-picker-popover>',openOn:"hover",classNames:"drop-popover drop-popover--transparent",model:{autoClose:!0,series:a,toggleAxis:function(){},colorSelected:function(e){p.changeSeriesColor(a,e)}}})})}}i.$on("$destroy",function(){c&&c.destroy()}),p.events.on("render",function(){if(n=p.series){for(var e in n)n[e].color=p.data[e].color;!function(){if("On graph"===g.legendType||!g.legend.show)return h.empty(),void r.find(".piechart-legend").css("padding-top",0);r.find(".piechart-legend").css("padding-top",6);d&&(r.append(h),h.on("click",".piechart-legend-icon",y),h.on("click",".piechart-legend-alias",v),h.on("click","th",m),d=!1);o=n,l=p.data,h.empty();var e="Right side"===g.legendType&&g.legend.sideWidth?g.legend.sideWidth+"px":"",t="Right side"===g.legendType&&g.legend.sideWidth?g.legend.sideWidth-1+"px":"";r.css("min-width",e),r.css("width",t);var i,f=g.legend.values||g.legend.percentage,w=("Under graph"===g.legendType||"Right side"===g.legendType)&&f;if(h.toggleClass("piechart-legend-table",w),w){var S='<tr><th colspan="2" style="text-align:left"></th>';g.legend.values&&(S+=function(e){var t=e;g.legend.header&&(t=g.legend.header);var i='<th class="pointer" data-stat="'+a.a.escape(e)+'">'+t;if(g.legend.sort===e){var r=g.legend.sortDesc?"fa fa-caret-down":"fa fa-caret-up";i+=' <span class="'+r+'"></span>'}return i+"</th>"}(p.panel.valueName)),g.legend.percentage&&(S+=function(e){var t='<th class="pointer" data-stat="'+e+'">percentage';if(g.legend.sort===e){var i=g.legend.sortDesc?"fa fa-caret-down":"fa fa-caret-up";t+=' <span class="'+i+'"></span>'}return t+"</th>"}(p.panel.valueName)),S+="</tr>",i=u()(S)}var M=0;if(g.legend.percentage)for(s=0;s<o.length;s++)M+=o[s].stats[p.panel.valueName];var Y=[];for(s=0;s<o.length;s++){var T=o[s],k=l[s];if((!g.legend.hideEmpty||!T.allIsNull)&&T.legend){var X=0;p.panel.legend.percentageDecimals&&(X=p.panel.legend.percentageDecimals);var W='<div class="piechart-legend-series';if(p.hiddenSeries[k.label]&&(W+=" piechart-legend-series-hidden"),W+='" data-series-index="'+s+'">',W+='<span class="piechart-legend-icon" style="float:none;">',W+='<i class="fa fa-minus pointer" style="color:'+k.color+'"></i>',W+="</span>",W+='<a class="piechart-legend-alias" style="float:none;">'+a.a.escape(k.label)+"</a>",f&&w){var L=k.legendData;if(g.legend.values&&(W+='<div class="piechart-legend-value">'+p.formatValue(L)+"</div>"),M){var R=(L/M*100).toFixed(X)+"%";W+='<div class="piechart-legend-value">'+R+"</div>"}}W+="</div>",Y.push(u()(W))}}if(w){var P=u()("<tbody></tbody>");void 0!==i&&P.append(i),P.append(Y),h.append(P)}else h.append(Y);"Under graph"===g.legendType?c?c.update():c=new b.a(r[0],{scrollYMarginOffset:2,suppressScrollX:!0}):c&&(c.destroy(),c=null)}()}})}}}]);var m=function(e){function t(t,i,r){var n=e.call(this,t,i)||this;n.$rootScope=r,n.hiddenSeries={};var o={pieType:"pie",legend:{show:!0,values:!0},links:[],datasource:null,maxDataPoints:3,interval:null,targets:[{}],cacheTimeout:null,nullPointMode:"connected",legendType:"Under graph",breakPoint:"50%",aliasColors:{},format:"short",valueName:"current",strokeWidth:1,fontSize:"80%",combine:{threshold:0,label:"Others"}};return a.a.defaults(n.panel,o),a.a.defaults(n.panel.legend,o.legend),n.events.on("render",n.onRender.bind(n)),n.events.on("data-received",n.onDataReceived.bind(n)),n.events.on("data-error",n.onDataError.bind(n)),n.events.on("data-snapshot-load",n.onDataReceived.bind(n)),n.events.on("init-edit-mode",n.onInitEditMode.bind(n)),n.setLegendWidthForLegacyBrowser(),n}return t.$inject=["$scope","$injector","$rootScope"],function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}(t,e),t.prototype.onInitEditMode=function(){this.addEditorTab("Options","public/plugins/grafana-piechart-panel/editor.html",2),this.unitFormats=s.a.getUnitFormats()},t.prototype.setUnitFormat=function(e){this.panel.format=e.value,this.render()},t.prototype.onDataError=function(){this.series=[],this.render()},t.prototype.changeSeriesColor=function(e,t){e.color=t,this.panel.aliasColors[e.alias]=e.color,this.render()},t.prototype.onRender=function(){this.data=this.parseSeries(this.series)},t.prototype.parseSeries=function(e){var t=this;return a.a.map(this.series,function(e,i){return{label:e.alias,data:e.stats[t.panel.valueName],color:t.panel.aliasColors[e.alias]||t.$rootScope.colors[i],legendData:e.stats[t.panel.valueName]}})},t.prototype.onDataReceived=function(e){this.series=e.map(this.seriesHandler.bind(this)),this.data=this.parseSeries(this.series),this.render(this.data)},t.prototype.seriesHandler=function(e){var t=new h.a({datapoints:e.datapoints,alias:e.target});return t.flotpairs=t.getFlotPairs(this.panel.nullPointMode),t},t.prototype.getDecimalsForValue=function(e){if(a.a.isNumber(this.panel.decimals))return{decimals:this.panel.decimals,scaledDecimals:null};var t,i=e/2,r=-Math.floor(Math.log(i)/Math.LN10),n=Math.pow(10,-r),o=i/n;o<1.5?t=1:o<3?(t=2,o>2.25&&(t=2.5,++r)):t=o<7.5?5:10,t*=n,Math.floor(e)===e&&(r=0);var l={decimals:0,scaledDecimals:0};return l.decimals=Math.max(0,r),l.scaledDecimals=l.decimals-Math.floor(Math.log(t)/Math.LN10)+2,l},t.prototype.formatValue=function(e){var t=this.getDecimalsForValue(e),i=s.a.valueFormats[this.panel.format];return i?i(e,t.decimals,t.scaledDecimals):e},t.prototype.link=function(e,t,i,r){p(0,t,0,r)},t.prototype.toggleSeries=function(e){this.hiddenSeries[e.label]?delete this.hiddenSeries[e.label]:this.hiddenSeries[e.label]=!0,this.render()},t.prototype.onLegendTypeChanged=function(){this.setLegendWidthForLegacyBrowser(),this.render()},t.prototype.setLegendWidthForLegacyBrowser=function(){!!window.MSInputMethodContext&&!!document.documentMode&&"Right side"===this.panel.legendType&&!this.panel.legend.sideWidth&&(this.panel.legend.sideWidth=150)},t.templateUrl="module.html",t}(n.MetricsPanelCtrl);i.d(t,"PanelCtrl",function(){return m}),Object(n.loadPluginCss)({dark:"plugins/grafana-piechart-panel/styles/dark.css",light:"plugins/grafana-piechart-panel/styles/light.css"})}])});